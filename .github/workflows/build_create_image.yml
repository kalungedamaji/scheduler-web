name: TestAndBuild
on:
    push:
      branches: [ master ]
    pull_request:
      branches: [ master ]
jobs:
    testAndBuild:
      name: Test And Build Docker Iamge
      runs-on: ubuntu-latest
      steps:
       - uses: actions/checkout@v2
        # Setup .npmrc file to publish to npm
       - uses: actions/setup-node@v2
         with:
            node-version: '16.x'
            registry-url: 'https://registry.npmjs.org'
       - name: clean install
         run: npm ci
       - name: build
         run: npm run build

       - name: Log in to Docker Hub
         run: |
              docker login -u dkalunge -p Discover#1137

       - name: build docker Image
         run: |
             docker build  -t  scheduler-web  .
       - name: push the docker image
         run: |
               docker push  scheduler-web

      outputs:
        image_name: scheduler-web

